---
name: semljgui
title: Structural Equation Models
menuGroup: SEM
menuTitle: SEM (interactive)
version: '1.0.0'
jas: '1.2'
arbitraryCode: true

options:
    - name: data
      type: Data
      description:
          R: >
             TO ADD

    - name: code
      default: |
      type: String
      hidden: true
      description:
          R: >
             TO ADD

    # Interface for selecting latent variables and the grouping variable ======
    - name: endogenous
      type: Array
      default:
        - label: Endogenous1
          vars: []
      template:
          type: Group
          elements:
            - name: label
              type: String
            - name: vars
              type: Variables
              suggested:
                - continuous
              permitted:
                - numeric
      description:
          R: >
             A list containing named lists that define the `label` of the latent endogenous variable(s) and
             the `vars` that belong to that latent.

    - name: exogenous
      type: Array
      default:
        - label: Exogenous1
          vars: []
      template:
          type: Group
          elements:
            - name: label
              type: String
            - name: vars
              type: Variables
              suggested:
                - continuous
              permitted:
                - numeric
      description:
          R: >
            A list containing named lists that define the `label` of the latent exogenous variables and
            the `vars` that belong to that latent.




#    # TO ADD?: input format
#    - name: inputformat
#      title: "Input data format"
#      hidden: true
#      type: List
#      options:
#        - name: dataraw
#          title: "Raw"
#        - name: varcov
#          title: "Variance-covariance matrix"
#      default: dataraw
#      description:
#          R: >
#             TO ADD
#    - name: samplesize
#      title: "â€“ Sample size"
#      hidden: true
#      type: Integer
#      default: 0
#      description:
#          R: >
#             TO ADD


    ### OPTIONS #########

    ### Endogenous models =====================================================
    - name: endogenousTerms
      title: Endogenous Latent Variable Models
      type: Array
      default: [[]]
      template:
          type: Terms
      description:
          R: >
             A list of lists specifying the models for with the mediators as dependent variables.

    ### Variances and covariances =============================================
    - name: varcov
      title: Select pairs
      type: Pairs
      description:
          R: >
             A list of lists specifying the  covariances that need to be estimated.


    ### Custom model settings =================================================
    - name: constraints
      title: Insert contraints or defined parameters
      type: Array
      default: []
      template:
          type: String
      description:
          R: >
             A list of lists specifying the models random effects.

    ### Model options =========================================================
    ### (a) Estimation --------------------------------------------------------
    - name: estimator
      title: Method
      type: List
      options:
        - name: default
          title: "Automatic"
        - name:  ML
          title: "Maximum Likelihood"
        - name: PML
          title: "Pairwise maximum likelihood"
        - name: GLS
          title: "Generalized Least Squares"
        - name: WLS
          title: "Weighted Least Squares"
        - name: DWLS
          title: "Diagonally weighted Least Squares"
        - name: ULS
          title: "Unweighted Least Squares"
      default: default
      description:
          R: >
             The estimator to be used. Can be one of the following: "ML" for maximum likelihood, "GLS" for (normal theory) generalized least squares,
             "WLS" for weighted least squares (sometimes called ADF estimation), "ULS" for unweighted least squares, "DWLS" for diagonally weighted
             least squares, and "DLS" for distributionally-weighted least squares. These are the main options that affect the estimation. For convenience,
             the "ML" option can be extended as "MLM", "MLMV", "MLMVS", "MLF", and "MLR". The estimation will still be plain "ML", but now with robust
             standard errors and a robust (scaled) test statistic. For "MLM", "MLMV", "MLMVS", classic robust standard errors are used (se="robust.sem");
             for "MLF", standard errors are based on first-order derivatives (information = "first.order"); for "MLR", `Huber-White' robust standard errors
             are used (se="robust.huber.white"). In addition, "MLM" will compute a Satorra-Bentler scaled (mean adjusted) test statistic (test="satorra.bentler"),
             "MLMVS" will compute a mean and variance adjusted test statistic (Satterthwaite style) (test="mean.var.adjusted"), "MLMV" will compute a mean and
             variance adjusted test statistic (scaled and shifted) (test="scaled.shifted"), and "MLR" will compute a test statistic which is asymptotically
             equivalent to the Yuan-Bentler T2-star test statistic (test="yuan.bentler.mplus"). Analogously, the estimators "WLSM" and "WLSMV" imply the
             "DWLS" estimator (not the "WLS" estimator) with robust standard errors and a mean or mean and variance adjusted test statistic. Estimators
             "ULSM" and "ULSMV" imply the "ULS" estimator with robust standard errors and a mean or mean and variance adjusted test statistic.

    - name: likelihood
      title: ML likelihood approach
      type: List
      options:
        - name: default
          title: "Automatic"
        - name: normal
          title: "Normal"
        - name:  wishart
          title: "Wishart"
      default: default
      description:
          R: >
             Only relevant for ML estimation. If "wishart", the wishart likelihood approach is used. In this approach, the covariance matrix has been divided
             by N-1, and both standard errors and test statistics are based on N-1. If "normal", the normal likelihood approach is used. Here, the covariance
             matrix has been divided by N, and both standard errors and test statistics are based on N. If "default", it depends on the mimic option:
             if mimic="lavaan" or mimic="Mplus", normal likelihood is used; otherwise, wishart likelihood is used.

    ### (b) Constraint Tests --------------------------------------------------
    - name: scoretest
      type: Bool
      title: Univariate
      default: true
      description:
          R: >
             TO ADD

    - name: cumscoretest
      type: Bool
      title: Cumulative
      default: false
      description:
          R: >
             TO ADD

#   - name: orthogonal
#     type: Bool
#     title: "Assume factors uncorrelated"
#     default: false
#     description:
#         R: >
#            TO ADD


    ### Parameter options =====================================================
    ### (a) Standard errors ---------------------------------------------------
    - name: se
      type: List
      title: Standard errors
      options:
        - name: standard
          title: Standard
        - name: robust.sem
          title: Robust
        - name: robust.huber.white
          title: Pseudo ML
        - name: boot
          title: Bootstrap
      default: standard
      description:
          R: >
             TO ADD

    ### (b) Bootstrap options -------------------------------------------------
    - name: bootci
      title: Bootstrap C.I
      type: List
      options:
        - name: perc
          title: percentiles
        - name: bca.simple
          title: adjusted bias-corrected
        - name: norm
          title: normal
        - name: basic
          title: basic
      default: perc
      description:
          R: >
             Choose the confidence interval type ("perc" - percentiles [default], "bca.simple" - adjusted bias-corrected, "norm" - normal, "basic" - basic).
    - name: bootN
      title: Bootstrap Rep.
      type: Number
      min: 50
      default: 1000
      description:
          R: >
             The number of bootstrap samples for estimating confidence intervals.

    ### (c) Confidence intervals ----------------------------------------------
    - name: ci
      title: ""
      type: Bool
      default: true
      description:
          R: >
            `TRUE` or `FALSE` (default), show confidence intervals
    - name: ciWidth
      title: Confidence level
      type: Number
      min: 50
      max: 99.9
      default: 95
      description:
          R: >
             A number between 50 and 99.9 (default: 95) specifying the confidence
             interval width for the parameter estimates.

    ### (d) Estimates ---------------------------------------------------------
    - name: meanstructure
      type: Bool
      title: Mean structure
      default: true
      description:
          R: >
             If TRUE, the means of the observed variables enter the model. Required for calculating the intercepts of
             the estimates.

    - name: intercepts
      type: Bool
      title: Intercepts of the estimates
      default: false
      description:
          R: >
            `TRUE` or `FALSE` (default), calculate and show the intercepts of the parameter estimates

    - name: indirect
      type: Bool
      title: Indirect Effects
      default: false
      description:
          R: >
            `TRUE` or `FALSE` (default), TO ADD

    ### (e) Scale / standardize variables -------------------------------------
    - name: std_lv
      title: Scale / stand. latent vars.
      type: List
      options:
        - name: fix_first
          title: "Latent vars.: Fix first indicator (to 1)"
        - name: std_res
          title: "Latent vars.: Fix residual variances (to 1)"
      default: fix_first
      description:
          R: >
             If `fix_first` (default), the factor loading of the first indicator is set to 1.0 for every latent variable.
             If `std_res`, the metric of each latent variable is determined by fixing their (residual) variances to 1.0.
             If there are multiple groups, "std_res" is chosen and "loadings" is included in the group.label argument,
             then only the latent variances i of the first group will be fixed to 1.0, while the latent variances of other
             groups are set free.

#   - name: effect.coding
#     title: Effects coding
#     type: Bool
#     default: false
#     description:
#         R: >
#           Can be logical or character string. If logical and `TRUE`, this implies effect.coding = c("loadings", "intercepts").
#           If logical and `FALSE`, it is set equal to the empty string. If "loadings" is included, equality constraints are
#           used so that the average of the factor loadings (per latent variable) equals 1. Note that this should not be used
#           together with std.lv = TRUE. If "intercepts" is included, equality constraints are used so that the sum of the
#           intercepts (belonging to the indicators of a single latent variable) equals zero. As a result, the latent mean will
#           be freely estimated and usually equal the average of the means of the involved indicators.

    - name: std_ov
      type: Bool
      title: "Observed vars.: Standardize before estimation"
      default: false
      description:
          R: >
             If TRUE, all observed variables are standardized before entering the analysis.


#    # (f) Miscellaneous 
    # TO-DO: find a better name than miscellaneous; perhaps: Constraints
    # lavOption: fixed.x
    - name: cov_x
      type: Bool
      title: Fix exogenous covariates
      default: false
      description:
          R: >
             If `TRUE`, the exogenous covariates are considered fixed variables and the means, variances and covariances of these
             variables are fixed to their sample values. If `FALSE`, they are considered random, and the means, variances and
             covariances are free parameters. If "default", the value is set depending on the mimic option.

    - name: cov_y
      type: Bool    
      title: Correlated y
      default: true
      description:
          R: >
             `TRUE` (default) or `FALSE`, TO ADD

    #   FURTHER OPTIONS (included in JASP-SEM)
#    - name: int.ov.fixed
#      type: Bool
#      title: "Fix manifest intercepts to zero"
#      default: false
#      description:
#          R: >
#            `TRUE` or `FALSE` (default), TO BE ADDED
#    - name: int.lv.fixed
#      type: Bool
#      title: "Fix latent intercepts to zero"
#      default: false
#      description:
#          R: >
#            `TRUE` or `FALSE` (default), TO BE ADDED
#    - name: auto.fix.single
#      type: Bool
#      title: "Omit residual single indicator"
#      default: true
#      description:
#          R: >
#            `TRUE` (default) or `FALSE`, TO BE ADDED
#    - name: auto.var
#      type: Bool
#      title: "Include residual variances"
#      default: true
#      description:
#          R: >
#            `TRUE` (default) or `FALSE`, TO BE ADDED
#    - name: auto.cov.lv.x
#      type: Bool
#      title: "Correlate exogenous latents"
#      default: true
#      description:
#          R: >
#            `TRUE` (default) or `FALSE`, TO BE ADDED
#    - name: auto.cov.y
#      type: Bool
#      title: "Correlate dependent variables"
#      default: true
#      description:
#          R: >
#            `TRUE` (default) or `FALSE`, TO BE ADDED
#    - name: auto.th
#      type: Bool
#      title: "Add thresholds"
#      default: true
#      description:
#          R: >
#            `TRUE` (default) or `FALSE`, TO BE ADDED
#    - name: auto.delta
#      type: Bool
#      title: "Add scaling parameters"
#      default: true
#      description:
#          R: >
#            `TRUE` (default) or `FALSE`, TO BE ADDED
#    - name: auto.efa
#      type: Bool
#      title: "Constrain EFA blocks"
#      default: true
#      description:
#          R: >
#            `TRUE` (default) or `FALSE`, TO BE ADDED


##   we need this also in GUI otherwise the syntax machine does not work. We do not use it (yet)
##   so we keep it hidden
    - name: cluster
      default: ""
      type: String
      hidden: true
      description:
          R: >
             Not used in gui


    ### Multigroup options / equality constraints =============================
    
    - name: multigroup
      title: Multigroup Analysis Factor
      type: Variable
      suggested:
        - nominal
        - ordinal
      permitted:
        - factor
      default:
      description:
          R: Factor defining groups for multigroup analysis.


    
    #   For the GUI-version, the GUI-element multigroup is part of the inter-
    #   face to elect variables

    - name: eq_loadings
      type: Bool
      title: "Loadings"
      default: false
      description:
          R: >
            `TRUE` or `FALSE` (default), constrain the factor loadings to be equal across groups (when conducting multi-group analyses)
    - name: eq_intercepts
      type: Bool
      title: "Intercepts"
      default: false
      description:
          R: >
            `TRUE` or `FALSE` (default), constrain the intercepts of the observed variables to be equal across groups (when conducting multi-group analyses)
    - name: eq_residuals
      type: Bool
      title: "Residuals"
      default: false
      description:
          R: >
            `TRUE` or `FALSE` (default), constrain the residual variances of the observed variables to be equal across groups (when conducting multi-group analyses)
    - name: eq_residual.covariances
      type: Bool
      title: "Residual covariances"
      default: false
      description:
          R: >
            `TRUE` or `FALSE` (default), constrain the residual covariances of the observed variables to be equal across groups (when conducting multi-group analyses)
    - name: eq_means
      type: Bool
      title: "Means"
      default: false
      description:
          R: >
            `TRUE` or `FALSE` (default), constrain the intercepts / means of the latent variables to be equal across groups (when conducting multi-group analyses)
    - name: eq_thresholds
      type: Bool
      title: "Threshold"
      default: false
      description:
          R: >
            `TRUE` or `FALSE` (default), constrain the sample-based thresholds (means for continuous observed mvariables) to be equal across groups (when conducting multi-group analyses)
    - name: eq_regressions
      type: Bool
      title: "Regressions"
      default: false
      description:
          R: >
            `TRUE` or `FALSE` (default), constrain all regression coefficients in the model to be equal across groups (when conducting multi-group analyses)
    - name: eq_lv.variances
      type: Bool
      title: "Latent variances"
      default: false
      description:
          R: >
            `TRUE` or `FALSE` (default), constrain the (residual) variances of the latent variables to be equal across groups (when conducting multi-group analyses)
    - name: eq_lv.covariances
      type: Bool
      title: "Latent covariances"
      default: false
      description:
          R: >
            `TRUE` or `FALSE` (default), constrain the (residual) covariances of the latent variables to be equal across groups (when conducting multi-group analyses)


    ### Output options ========================================================
    - name: showlabels
      type: Bool
      title: Show parameters labels
      default: false
      description:
          R: >
            `TRUE` or `FALSE` (default), show the labels of the parameters in the model
    - name: constraints_examples
      type: Bool
      title: Show syntax examples
      default: false
      description:
          R: >
            `TRUE` or `FALSE` (default), show examples of the lavaan model syntax

    ### (a) Additional outputs ------------------------------------------------
    - name: outputAdditionalFitMeasures
      type: Bool
      title: "Additional fit measures"
      default: false
      description:
          R: >
            `TRUE` or `FALSE` (default), show additional fit measures (e.g., CFI, TLI, etc.)
    - name: r2
      type: List
      options:
        - name:  none
          title: None
        - name:  all
          title: All
        - name:  endo
          title: Endogenous
        - name:  all
          title: All
      default: none


    - name: outputMardiasCoefficients
      type: Bool
      title: "Mardia's coefficients"
      default: false
      description:
          R: >
            `TRUE` or `FALSE` (default), show Mardia's coefficients for multivariate skewness and kurtosis

    ### (b) Covariances and correlations --------------------------------------
    - name: outputObservedCovariances
      type: Bool
      title: "observed"
      default: false
      description:
          R: >
            `TRUE` or `FALSE` (default), show the covariances and correlations between the observed values of the (manifest) variables
    - name: outputImpliedCovariances
      type: Bool
      title: "model-implied (fitted)"
      default: false
      description:
          R: >
            `TRUE` or `FALSE` (default), show the covariances and correlations between the model-implied / fitted values of the (manifest) variables
    - name: outputResidualCovariances
      type: Bool
      title: "residual"
      default: false
      description:
          R: >
             `TRUE` or `FALSE` (default), show the covariances and correlations between the residuals of the (manifest) variables.
    - name: outpuCombineCovariances
      type: Bool
      title: "combined into one table"
      default: false
      description:
          R: >
             `TRUE` or `FALSE` (default), combine the (up to) three covariance / correlation tables into one table (i.e., showing
             observed, model-implied and residual values for each variable combination underneath each other)


    ### (c) Modification indices ----------------------------------------------
    - name: outputModificationIndices
      type: Bool
      title: "Modification indices"
      default: false
      description:
          R: >
            `TRUE` or `FALSE` (default), show modification indices for if certain terms were removed from the model
    - name: miHideLow
      type: Bool
      title: "Hide low indices"
      default: false
      description:
          R: >
             `TRUE` or `FALSE` (default), hide modification indices below a certain threshold.
    - name: miThreshold
      type: Number
      title: "Threshold"
      default: 10
      min: 0
      description:
          R: >
             Numeric (default: 10), set a threshold the modification indices must exceed in order to be shown.


    ### Path diagram ==========================================================
    ### (a) Enable diagram, residuals and intercept ---------------------------
    - name: diagram
      title: ""
      type: Bool
      default: false
      description:
          R: >
             `TRUE` or `FALSE` (default), produce a path diagram.
    - name: diag_resid
      title: show residuals
      type: Bool
      default: false
      description:
          R: >
             `TRUE` or `FALSE` (default), show the residuals (for the observed variables).
    - name: diag_intercepts
      title: show intercepts
      type: Bool
      default: false
      description:
          R: >
             `TRUE` or `FALSE` (default), show the variable intercepts.

    ### (b) Paths -------------------------------------------------------------
    - name: diag_paths
      title: Paths Labels
      type: List
      options:
        - name:  est
          title: Coefficients
        - name: stand
          title: Betas
        - name: name
          title: Labels
        - name: hide
          title: None
      default: est
      description:
          R: >
             Choose the values shown along the paths ("est" [coeffic., default], "stand" [betas], "name" [labels], "hide" [nothing]).

    ### (c) Layout ------------------------------------------------------------
    - name: diag_type
      title: Type
      type: List
      options:
        - name:  "tree"
          title: Tree-like
        - name:  "tree2"
          title: Tree-like alt.
        - name: "circle"
          title: Circular
        - name: "circle2"
          title: Circular alt.
        - name: "spring"
          title: Spring
      default: "tree"
      description:
          R: >
             Choose the layout of the path diagram ("tree" [default], "tree2", "circle", "circle2", "spring").
    - name: diag_rotate
      title: Rotate
      type: List
      options:
        - name: "1"
          title: Exog. top
        - name: "2"
          title: Exog. left
        - name: "3"
          title: Exog. bottom
        - name: "4"
          title: Exog. right
      default: "2"
      description:
          R: >
             Choose the rotation of the path diagram (placement of the exog. variables; "1": top, "2": left (default), "3": bottom, "4": right).

    ### (d) Nodes -------------------------------------------------------------
    - name: diag_labsize
      title: Node Size
      type: List
      options:
        - name: "small"
          title: Small
        - name: "medium"
          title: Medium
        - name: "large"
          title: Large
        - name: "vlarge"
          title: Very Large
      default: "medium"
      description:
          R: >
             Choose the node size for the variables (default: "medium").
    - name: diag_shape_man
      title: Manifest shapes
      type: List
      options:
        - name:  "rectangle"
          title:  Rectangles
        - name:  "square"
          title:  Squares
        - name: "circle"
          title: Circles
        - name: "ellipse"
          title: Ellipses
        - name: "diamond"
          title: Diamonds
      default: "rectangle"
      description:
          R: >
             Choose the shape for the manifest variables (default: "rectangle").
    - name: diag_shape_lat
      title: Latent shapes
      type: List
      options:
        - name: "circle"
          title: Circles
        - name:  "rectangle"
          title:  Rectangles
        - name:  "square"
          title:  Squares
        - name: "ellipse"
          title: Ellipses
        - name: "diamond"
          title: Diamonds
      default: "circle"
      description:
          R: >
             Choose the shape for the latent variables (default: "circle").
    - name: diag_abbrev
      title: Abbreviate
      type: List
      options:
        - name:  "0"
          title:  No abbrev.
        - name:  "5"
          title:  "5"
        - name:  "10"
          title:  "10"
        - name:  "15"
          title:  "15"
        - name:  "20"
          title:  "20"
        - name:  "25"
          title:  "25"
      default: "5"
      description:
          R: >
             Choose the length (characters) of the variable name abbreviations (default: 5).

...
